<!DOCTYPE html>
<html>

<head>
    <title>Chatbot | S4S</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <div id="chat-window">
        <div class="main-title">Chatbot With Different Inputs</div>
        <div id="chat-messages"></div>
        <form id="chat-form">
            <div class="containerIcons">
                <div class="icons">

                    <label for="pdf">
                        <i class="fa fa-file" aria-hidden="true"></i>
                        Upload Pdf</label>
                    <input type="file" id="pdf" style="display: none;">

                </div>
                <div class="icons">

                    <label for="img">
                        <i class="fa fa-picture-o" aria-hidden="true"></i>
                        Upload Img</label>
                    <input type="file" id="img" style="display: none;">

                </div>
                <div class="icons">

                    <label for="audio">
                        <i class="fa fa-microphone" aria-hidden="true"></i>
                        Audio</label>
                    <input type="file" id="audio" style="display: none;">

                </div>



            </div>
            <div class="prompt">

                <input type="text" id="chat-input" autocomplete="off" placeholder="Type your message here" required />
                <button type="submit">Send</button>
            </div>
        </form>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.3/axios.min.js"></script>
    <script>const form = document.getElementById("chat-form");
        const input = document.getElementById("chat-input");
        const messages = document.getElementById("chat-messages");
        const apiKey = "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";

        form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const message = input.value;
            input.value = "";

            messages.innerHTML += `<div class="message user-message">
      <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" alt="user icon"> <span>${message}</span>
      </div>`;


            const response = await axios.post(
                "https://api.openai.com/v1/completions",
                {
                    prompt: message,
                    model: "text-davinci-003",
                    temperature: 0,
                    max_tokens: 1000,
                    top_p: 1,
                    frequency_penalty: 0.0,
                    presence_penalty: 0.0,
                },
                {
                    headers: {
                        "Content-Type": "application/json",
                        Authorization: `Bearer ${apiKey}`,
                    },
                }
            );
            const chatbotResponse = response.data.choices[0].text;

            console.log(chatbotResponse);
            console.log(response)

            messages.innerHTML += `<div class="message bot-message">
      <img src="https://camo.githubusercontent.com/2f1065f3cc62c661aa1ff2eba71bcbc876a11be3ebc6ee4e06015aa565c0ba14/68747470733a2f2f63646e2e69636f6e73636f75742e636f6d2f69636f6e2f7072656d69756d2f706e672d3531322d7468756d622f6f70656e61692d313532333636342d313239303230322e706e67" alt="bot icon"> <span>${chatbotResponse}
      
      </span>
      </div>`;
        });</script>
</body>

</html>